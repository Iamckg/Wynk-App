trigger CountMembers on Customer__c (after insert, after update, after delete, after undelete) {
 // Create a set to store unique Group__c record IDs that need to be updated
    Set<Id> groupIdsToUpdate = new Set<Id>();

    if (Trigger.isInsert || Trigger.isUpdate || Trigger.isUnDelete) {
        for (Customer__c member : Trigger.new) {
            groupIdsToUpdate.add(member.Group__c);
        }
    }

    if (Trigger.isDelete) {
        for (Customer__c member : Trigger.old) {
            groupIdsToUpdate.add(member.Group__c);
        }
    }

    // Query and update the Group__c records
    List<Group__c> groupsToUpdate = [SELECT Id FROM Group__c WHERE Id IN :groupIdsToUpdate];

    for (Group__c gp : groupsToUpdate) {
        gp.Total_Members__c = String.valueOf([SELECT COUNT() FROM Customer__c WHERE Group__c = :gp.Id]);
    }

    // Update the Group__c records with the calculated total
    update groupsToUpdate;
}
